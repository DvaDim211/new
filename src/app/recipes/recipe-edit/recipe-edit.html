<div class="container">
  <form class="qqwwee" [formGroup]="recipeForm" (ngSubmit)="onSubmit()">
    <div class="buttons">
      <button
        mat-raised-button
        color="primary"
        [disabled]="!recipeForm.valid"
        type="submit">
        Save
      </button>
      <button
        mat-raised-button
        color="primary"
        (click)="cancelAction()"
        type="button">
        Cancel
      </button>
    </div>

    <div>
      <mat-form-field appearance="outline">
        <mat-label>Recipe Name</mat-label>
        <input formControlName="recipeName" matInput placeholder="Recipe Name">
      </mat-form-field>
    </div>

    <div>
      <mat-form-field appearance="outline">
        <mat-label>Image URl</mat-label>
        <input formControlName="recipeImagePath" matInput placeholder="Image URL">
      </mat-form-field>
    </div>

    <div class="imgContainer">
      <img
        class="recipeImg"
        [src]="recipe()!.imagePath"
      />
    </div>

    <div>
      <mat-form-field>
        <mat-label>Description</mat-label>
        <textarea
          matInput
          formControlName="recipeDescription"
          cdkTextareaAutosize
          cdkAutosizeMinRows="1"
          cdkAutosizeMaxRows="5"></textarea>
      </mat-form-field>
    </div>

    <div formArrayName="recipeIngredients">
      @for (ingredientCtrl of ingredientControls(); track i; let i = $index) {
        <div class="ingredients-line" [formGroupName]="i" >
          <div>
            <input type="text" class="form-control" formControlName="name" />
          </div>
          <div>
            <input
              type="number"
              class="form-control"
              formControlName="amount"
            />
          </div>
          <div>
            <button
              type="button"
              (click)="onDeleteIngredient(i)"
              class="btn btn-danger"
            >
              X
            </button>
          </div>
        </div>
      }
      <hr />
      <div>
        <button
          type="button"
          class="btn btn-success"
          (click)="onAddIngredient()"
        >
          Add ingredient
        </button>
      </div>
    </div>
  </form>
</div>
